# 뉴스 검색 및 크롤링 시스템 기능 체크리스트

## 자동 시스템 상태 확인

**브라우저에서 이 URL을 열어주세요:**
```
http://localhost:3000/api/system-health
```

이 API가 자동으로 모든 시스템 상태를 확인합니다.

---

## 수동 기능 테스트 체크리스트

### ✅ 1. 환경 설정
- [ ] `.env` 파일에 `FIRECRAWL_API_KEY` 설정됨
- [ ] 개발 서버 실행 중 (`npm run dev`)
- [ ] 데이터베이스 연결 정상

### ✅ 2. 영어 뉴스 검색
**테스트 페이지:** `/admin/search` 또는 `/admin/crawling/search`

1. [ ] 페이지 정상 로드
2. [ ] 검색창에 "technology" 입력
3. [ ] "검색" 버튼 클릭
4. [ ] 검색 진행 상황 표시됨
5. [ ] 검색 완료 후 결과 표시됨 (약 1-2분 소요)
6. [ ] BBC, CNN 등 영문 뉴스 소스 표시됨
7. [ ] 기사 클릭 시 상세 내용 모달 표시됨
8. [ ] "원문 보기" 버튼 작동

**예상 소스:** BBC News, CNN, Reuters, Google News

### ✅ 3. 한국어 뉴스 검색
**테스트 페이지:** `/admin/search` 또는 `/admin/crawling/search`

1. [ ] 검색창에 "삼성전자" 또는 "인공지능" 입력
2. [ ] "검색" 버튼 클릭
3. [ ] 검색 완료 후 결과 표시됨
4. [ ] 네이버, 다음 등 한국 뉴스 소스 표시됨
5. [ ] 한글 기사 내용 정상 표시됨

**예상 소스:** 네이버 뉴스, 다음 뉴스, 조선일보, 중앙일보, 동아일보

### ✅ 4. 스크래핑 작업 관리
**테스트 페이지:** `/admin/crawling/jobs`

1. [ ] 페이지 정상 로드
2. [ ] 키워드 입력 필드 작동
3. [ ] 키워드 추가/제거 가능
4. [ ] 최대 기사 수 슬라이더 작동
5. [ ] 관련도 임계값 슬라이더 작동
6. [ ] "작업 시작" 버튼 클릭 시 작업 실행
7. [ ] 진행 상황 표시
8. [ ] 작업 완료 후 결과 표시

### ✅ 5. 검색 기록
**테스트 페이지:** `/admin/search` 또는 `/admin/crawling/search`

1. [ ] "최근 검색" 드롭다운 표시됨
2. [ ] 이전 검색 기록 목록 표시됨
3. [ ] 검색 기록 클릭 시 해당 키워드 자동 입력
4. [ ] "이전 검색 불러오기" 드롭다운 작동 (`/admin/crawling/jobs` 페이지)
5. [ ] 검색 기록 선택 시 설정값 자동 복원

### ✅ 6. 콘텐츠 관리
**테스트 페이지:** `/admin/content`

1. [ ] 페이지 정상 로드
2. [ ] 통계 카드 4개 표시 (전체, 처리완료, 원본, 실패)
3. [ ] 수집된 기사 목록 표시됨
4. [ ] 검색창으로 기사 필터링 가능
5. [ ] 상태별 필터 작동 (모든 상태, 처리 완료, 원본, 실패)
6. [ ] 정렬 옵션 작동 (수집일순, 발행일순, 관련도순, 제목순)
7. [ ] 체크박스로 여러 기사 선택 가능
8. [ ] "선택 삭제" 버튼 작동
9. [ ] "내보내기" 버튼으로 CSV 다운로드 가능
10. [ ] 기사 클릭 시 상세 모달 표시
11. [ ] 페이지네이션 작동 (20개씩)

### ✅ 7. 검색 기록 관리
**테스트 페이지:** `/admin/crawling/history`

1. [ ] 페이지 정상 로드
2. [ ] 검색 기록 목록 표시
3. [ ] 각 검색의 키워드, 결과 수, 검색 시간 표시
4. [ ] 날짜별 필터링 가능
5. [ ] 검색 기록 삭제 가능

### ✅ 8. 즐겨찾기 키워드
**테스트 페이지:** `/admin/crawling/favorites`

1. [ ] 페이지 정상 로드
2. [ ] 즐겨찾기 키워드 목록 표시
3. [ ] 키워드 클릭 시 검색 시작
4. [ ] 키워드 추가/삭제 가능

### ✅ 9. 크롤링 소스 관리
**테스트 페이지:** `/admin/crawling/sources`

1. [ ] 페이지 정상 로드
2. [ ] 뉴스 소스 목록 표시
3. [ ] 소스 활성화/비활성화 가능
4. [ ] 새 소스 추가 가능

### ✅ 10. API 엔드포인트 테스트

**브라우저 또는 curl로 테스트:**

```bash
# 기사 목록 조회
http://localhost:3000/api/articles?page=1&pageSize=10

# 기사 통계
http://localhost:3000/api/articles/stats

# 검색 기록
http://localhost:3000/api/search-history?page=1&pageSize=10

# 시스템 상태
http://localhost:3000/api/system-health

# Firecrawl 테스트
http://localhost:3000/api/test-firecrawl

# 전체 검색 테스트 (영어)
http://localhost:3000/api/test-full-search

# 한국어 검색 테스트
http://localhost:3000/api/test-korean-search
```

---

## 알려진 제한사항

1. **Firecrawl API 제한**
   - 무료 티어 사용량 제한 있음
   - 검색당 약 30초~2분 소요

2. **뉴스 소스**
   - 영어: BBC, CNN, Reuters, Google News 등
   - 한국어: 네이버, 다음, 조선, 중앙, 동아 등
   - 일부 사이트는 크롤링 제한이 있을 수 있음

3. **중복 처리**
   - 같은 URL은 30일 이내 재수집 안됨
   - 같은 검색 작업 내에서는 중복 제거됨

4. **성능**
   - 첫 검색은 시간이 더 걸릴 수 있음
   - 많은 키워드 또는 높은 maxArticles 값은 시간 증가

---

## 문제 해결

### 검색이 안되는 경우
1. `.env` 파일의 `FIRECRAWL_API_KEY` 확인
2. 개발 서버 재시작
3. 브라우저 콘솔(F12)에서 에러 확인
4. 서버 터미널에서 로그 확인

### 데이터가 저장 안되는 경우
1. `/api/check-db` 호출해서 데이터베이스 상태 확인
2. `prisma db push` 명령어 실행
3. 데이터베이스 파일 권한 확인

### 한국어 검색이 안되는 경우
1. 한글 키워드가 제대로 입력되었는지 확인
2. 서버 로그에서 "Using Korean news sources" 메시지 확인
3. `/api/test-korean-search` 테스트 API 실행

---

## 성공 기준

✅ **시스템이 정상 작동 중**이라고 판단할 수 있는 조건:

1. `/api/system-health` 응답이 `"overall": "healthy"`
2. 영어 키워드로 검색 시 BBC, CNN 등에서 결과 반환
3. 한국어 키워드로 검색 시 네이버, 다음 등에서 결과 반환
4. 검색된 기사가 `/admin/content`에서 확인됨
5. 검색 기록이 저장되고 불러오기 가능
6. CSV 내보내기 및 삭제 기능 정상 작동

---

## 다음 단계

모든 체크리스트를 완료한 후:
- [ ] 실제 사용 시나리오 테스트
- [ ] 다양한 키워드로 검색 테스트
- [ ] 데이터 축적 후 관리 기능 테스트
- [ ] 성능 최적화 검토

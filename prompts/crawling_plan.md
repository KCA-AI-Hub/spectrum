# Firecrawl API 정책동향 분석 시스템 - 관리자 화면 UI 개발 플랜

## 📋 프로젝트 개요

### 시스템 목적
- Firecrawl API를 활용한 정책동향 분석 플랫폼
- 관리자가 일주일에 한번 키워드 기반 크롤링 수행
- 크롤링 → 문서요약 → 동영상 생성 → 퀴즈 생성의 확장 가능한 워크플로우

### 핵심 기능 요구사항
1. **키워드 기반 크롤링**: 전파, 주파수 등 관리자 등록 키워드
2. **사이트 관리**: Excel 파일로 대상 사이트 주소 관리
3. **주기적 실행**: 일주일에 한번 관리자 수동 실행
4. **확장성**: 문서요약, 동영상 생성, 퀴즈 생성, 사용자 관리 기능 고려

## 🎯 관리자 화면 UI 개발 계획

### Phase 1: 크롤링 관리 화면 (우선순위 높음)

#### 1.1 크롤링 대시보드
- **위치**: `/admin` 경로의 첫 번째 탭
- **주요 구성요소**:
  - 크롤링 통계 카드 (활성 작업, 수집 기사 수, 성공률, 전일 대비 증가)
  - 크롤링 실행 버튼 (주간 단위 실행)
  - 진행 상태 표시 (실시간 진행률, 상태 메시지)
  - 크롤링 결과 미리보기

#### 1.2 키워드 관리 섹션
- 키워드 입력 필드와 추가 버튼 제공
- 등록된 키워드들을 태그 형태로 표시
- 태그 클릭으로 키워드 삭제 기능
- 카테고리별 키워드 분류 (기술, 정책, 산업 등)

#### 1.3 사이트 관리 섹션
- Excel 파일 업로드 영역 (드래그 앤 드롭 지원)
- 업로드된 사이트 목록 표시 및 관리
- 사이트 유효성 검증 기능
- 사이트 그룹별 분류 (정부기관, 언론사, 기술블로그 등)

#### 1.4 크롤링 실행 및 모니터링
- **실행 버튼**: "주간 크롤링 시작" 버튼
- **진행 상태**: 실시간 진행률 바와 상태 메시지
- **결과 표시**: 크롤링된 기사 목록과 요약 정보

### Phase 2: 확장 기능 준비 화면

#### 2.1 문서 요약 관리 탭
- 크롤링된 기사들의 AI 요약 상태 관리
- 요약 품질 검토 및 승인/거부 기능
- 요약 템플릿 및 프롬프트 설정

#### 2.2 동영상 생성 관리 탭
- 승인된 요약의 동영상 제작 대기열
- 캐릭터 선택 및 음성 설정
- 제작 진행 상황 모니터링

#### 2.3 퀴즈 생성 관리 탭
- 동영상별 퀴즈 생성 설정
- 퀴즈 난이도 및 문제 수 조정
- 생성된 퀴즈 검토 및 수정

#### 2.4 사용자 관리 탭
- 플랫폼 사용자 목록 및 권한 관리
- 부서별 접근 권한 설정
- 사용 통계 및 활동 로그

## 🛠 기술 구현 계획

### 3.1 백엔드 API 엔드포인트

#### 크롤링 관련 API
- **키워드 관리**: 키워드 추가, 목록 조회, 삭제
- **사이트 관리**: Excel 파일 업로드, 사이트 목록 조회, 정보 수정
- **크롤링 실행**: 크롤링 시작, 상태 조회, 결과 조회

#### 확장 기능 API (향후 구현)
- **문서 요약**: 요약 생성 시작, 목록 조회, 승인/거부
- **동영상 생성**: 동영상 생성 시작, 제작 대기열 조회, 상태 조회
- **퀴즈 생성**: 퀴즈 생성, 목록 조회, 수정
- **사용자 관리**: 사용자 목록, 추가, 정보 수정

### 3.2 데이터베이스 스키마 설계

#### 크롤링 관련 테이블
- **crawling_keywords**: 크롤링 키워드 정보 (키워드, 카테고리, 활성 상태)
- **crawling_sites**: 크롤링 대상 사이트 정보 (이름, URL, 사이트 타입, 크롤링 주기)
- **crawling_jobs**: 크롤링 작업 정보 (작업명, 키워드 배열, 사이트 배열, 상태, 진행률)
- **crawled_articles**: 크롤링된 기사 정보 (제목, 내용, 요약, URL, 출처, 발행일)

#### 확장 기능 테이블 (향후 구현)
- **article_summaries**: 기사 요약 정보 (요약 텍스트, 요약 타입, 승인 상태)
- **video_productions**: 동영상 제작 정보 (스크립트, 캐릭터, 음성 설정, 제작 상태)
- **quizzes**: 퀴즈 정보 (문제 배열, 난이도, 문제 수, 상태)

### 3.3 Firecrawl API 통합

#### 크롤링 서비스 설계
- **CrawlingService 클래스**: Firecrawl API 통합 및 크롤링 로직 담당
- **키워드 기반 다중 사이트 크롤링**: 등록된 모든 키워드로 모든 사이트 크롤링
- **사이트별 검색 URL 생성**: 네이버, 구글 등 사이트별 맞춤 검색 URL 생성
- **오류 처리**: 개별 사이트/키워드 크롤링 실패 시에도 전체 작업 계속 진행
- **결과 통합**: 모든 크롤링 결과를 통합하여 반환

## 🎨 UI/UX 개선 사항

### 4.1 크롤링 실행 플로우 개선
1. **원클릭 실행**: "주간 크롤링 시작" 버튼 하나로 모든 키워드와 사이트 크롤링
2. **실시간 피드백**: WebSocket을 통한 실시간 진행 상황 업데이트
3. **결과 미리보기**: 크롤링 완료 즉시 수집된 기사 목록 표시

### 4.2 키워드 관리 UX
- **태그 형태**: 등록된 키워드를 태그로 표시, 클릭으로 삭제 가능
- **자동완성**: 기존 키워드 기반 자동완성 기능
- **카테고리 분류**: 키워드를 기술, 정책, 산업 등으로 분류

### 4.3 사이트 관리 UX
- **드래그 앤 드롭**: Excel 파일 업로드를 위한 직관적인 UI
- **사이트 검증**: 업로드된 URL의 유효성 자동 검사
- **사이트 그룹핑**: 정부기관, 언론사, 기술블로그 등으로 분류

## 📅 개발 일정 및 마일스톤

### Week 1: 기본 크롤링 기능
- [x] 관리자 대시보드 기본 구조 (현재 완료)
- [ ] 키워드 관리 API 및 UI 구현
- [ ] Excel 파일 업로드 기능 구현
- [ ] Firecrawl API 통합 개선

### Week 2: 크롤링 실행 및 모니터링
- [ ] 주간 크롤링 실행 기능
- [ ] 실시간 진행 상황 표시
- [ ] 크롤링 결과 저장 및 표시
- [ ] 오류 처리 및 재시도 로직

### Week 3: 확장성 준비
- [ ] 문서 요약 관리 탭 기본 구조
- [ ] 동영상 생성 관리 탭 기본 구조
- [ ] 데이터베이스 스키마 확장
- [ ] API 엔드포인트 확장 준비

### Week 4: 테스트 및 최적화
- [ ] 전체 기능 통합 테스트
- [ ] 성능 최적화
- [ ] UI/UX 개선
- [ ] 문서화 및 배포 준비

## 🔧 기술 스택 및 라이브러리

### 현재 사용 중
- **Backend**: Flask, Python 3.11+
- **Frontend**: HTML5, Tailwind CSS, Vanilla JavaScript
- **Database**: SQLite (개발), PostgreSQL (운영 권장)
- **Crawling**: Firecrawl API

### 추가 권장 라이브러리
- **pandas, openpyxl**: Excel 파일 처리 및 읽기/쓰기
- **celery, redis**: 백그라운드 작업 처리 및 브로커
- **websockets**: 실시간 진행 상황 업데이트
- **sqlalchemy, flask-migrate**: ORM 및 데이터베이스 마이그레이션

## ✅ 성공 지표

### 기능적 지표
- [ ] 관리자가 원클릭으로 주간 크롤링 실행 가능
- [ ] Excel 파일로 크롤링 대상 사이트 관리 가능
- [ ] 키워드별 크롤링 결과를 실시간으로 모니터링 가능
- [ ] 크롤링된 기사들이 체계적으로 저장 및 분류됨

### 기술적 지표
- [ ] Firecrawl API 통합 성공률 90% 이상
- [ ] 크롤링 작업 완료 시간 30분 이내 (100개 기사 기준)
- [ ] UI 응답성 및 사용자 경험 만족도 높음
- [ ] 향후 확장 기능 추가 시 기존 코드 수정 최소화

## 🚀 향후 확장 계획

### Phase 3: AI 기반 문서 요약 (Month 2)
- OpenAI GPT API 또는 Claude API 통합
- 요약 품질 평가 및 개선 시스템
- 다국어 요약 지원

### Phase 4: 동영상 자동 생성 (Month 3)
- fal.ai API 통합으로 AI 동영상 생성
- 다양한 캐릭터 및 음성 옵션
- 동영상 편집 및 후처리 기능

### Phase 5: 퀴즈 및 학습 관리 (Month 4)
- 동영상 기반 자동 퀴즈 생성
- 사용자별 학습 진도 추적
- 학습 효과 분석 및 리포트

이 플랜을 통해 Firecrawl API를 활용한 정책동향 분석 시스템의 관리자 화면을 체계적으로 구축하고, 향후 확장 기능들을 원활하게 추가할 수 있는 기반을 마련할 수 있습니다.

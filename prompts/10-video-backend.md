# 10. λ™μμƒ μƒμ„± μ‹μ¤ν… κΈ°λ¥ κµ¬ν„

## κ°μ”
AI κΈ°λ° Text-to-Video λ™μμƒ μƒμ„± μ‹μ¤ν…μ ν•µμ‹¬ λ°±μ—”λ“ κΈ°λ¥μ„ κµ¬ν„ν•©λ‹λ‹¤. ν…μ¤νΈλ¥Ό λ™μμƒμΌλ΅ λ³€ν™ν•λ” API μ—°λ™, λ™μμƒ μ²λ¦¬ νμ΄ν”„λΌμΈ, νμΌ κ΄€λ¦¬ μ‹μ¤ν…, κ·Έλ¦¬κ³  μ‘μ—… ν κ΄€λ¦¬ μ‹μ¤ν…μ„ μ™„μ„±ν•©λ‹λ‹¤.

## λ©ν‘
- Text-to-Video APIμ™€μ μ•μ •μ μΈ ν†µν•©
- ν¨μ¨μ μΈ λ™μμƒ μƒμ„± λ° μ²λ¦¬ νμ΄ν”„λΌμΈ
- ν™•μ¥ κ°€λ¥ν• λ™μμƒ μ‘μ—… κ΄€λ¦¬ μ‹μ¤ν…
- μ•μ „ν• νμΌ μ €μ¥ λ° κ΄€λ¦¬ μ‹μ¤ν…

## μ²΄ν¬λ¦¬μ¤νΈ

### 10.1 λ™μμƒ μƒμ„± API κµ¬ν„ β… (100% μ™„λ£)
- [x] Text-to-Video API μ—”λ“ν¬μΈνΈ κµ¬ν„ (`app/api/videos/generate/route.ts`)
- [x] λ™μμƒ μƒμ„± μ‘μ—… ν μ‹μ¤ν… (VideoJobManager)
- [x] λ™μμƒ μƒμ„± μƒνƒ μ¶”μ  API (`app/api/videos/route.ts`, `app/api/videos/[id]/route.ts`)
- [x] νμΌ μ—…λ΅λ“/λ‹¤μ΄λ΅λ“ API (VideoFileManager)
- [x] λ™μμƒ λ©”νƒ€λ°μ΄ν„° κ΄€λ¦¬ API (PATCH /api/videos/[id])

### 10.2 λ™μμƒ μƒμ„± μ—”μ§„ ν†µν•© β… (80% μ™„λ£)
- [x] Text-to-Video AI μ„λΉ„μ¤ μ—°λ™ κµ¬μ΅° (`lib/video/text-to-video-api.ts`)
- [x] ν”„λ΅¬ν”„νΈ μµμ ν™” λ° μ „μ²λ¦¬ λ΅μ§ (generatePrompt ν•¨μ)
- [x] λ™μμƒ μ¤νƒ€μΌ λ° ν…ν”λ¦Ώ κ΄€λ¦¬ μ‹μ¤ν… (VideoTemplate λ¨λΈ, `/api/videos/templates`)
- [x] μƒμ„± νλΌλ―Έν„° κ²€μ¦ λ° μµμ ν™”
- [x] μƒμ„± μ‹¤ν¨ μ‹ μ¬μ‹λ„ λ©”μ»¤λ‹μ¦ (VideoJobManager.retryJob)

**μ°Έκ³ **: RunwayML, Pika Labs λ“± μ‹¤μ  APIλ” μΈν„°νμ΄μ¤λ§ μ •μ, Mock Providerλ΅ ν…μ¤νΈ κ°€λ¥

### 10.3 λ™μμƒ μ²λ¦¬ νμ΄ν”„λΌμΈ β… (100% μ™„λ£)
- [x] λ™μμƒ νμΌ λ‹¤μ΄λ΅λ“ λ° μ €μ¥ (VideoFileManager)
- [x] μΈλ„¤μΌ λ‹¤μ΄λ΅λ“ λ° μ €μ¥ κΈ°λ¥
- [x] λ™μμƒ μΈμ½”λ”© λ° μ••μ¶• μ‹μ¤ν… (VideoProcessor - FFmpeg κΈ°λ°)
- [x] μΈλ„¤μΌ μλ™ μƒμ„± κΈ°λ¥ (VideoProcessor.generateThumbnails)
- [x] λ™μμƒ ν’μ§ κ²€μ¦ λ° μµμ ν™” (VideoProcessor.validateVideo, optimizeVideo)
- [x] λ‹¤μ–‘ν• ν¬λ§· λ³€ν™ μ§€μ› (MP4, WebM, GIF)
- [x] μ›ν„°λ§ν¬ λ° λΈλλ”© μ μ© (VideoProcessor.addWatermark)

### 10.4 νμΌ μ €μ¥ λ° κ΄€λ¦¬ μ‹μ¤ν… β… (70% μ™„λ£)
- [x] λ΅μ»¬ νμΌ μ €μ¥ μ‹μ¤ν… (`lib/video/file-manager.ts`)
- [x] λ™μμƒ λ° μΈλ„¤μΌ μ €μ¥/μ‚­μ /μ΅°ν κΈ°λ¥
- [x] νμΌ ν¬κΈ° λ° μ¤ν† λ¦¬μ§€ μ •λ³΄ μ΅°ν
- [x] URLμ—μ„ νμΌ λ‹¤μ΄λ΅λ“ κΈ°λ¥
- [ ] ν΄λΌμ°λ“ μ¤ν† λ¦¬μ§€ μ—°λ™ (λ―Έκµ¬ν„, λ΅μ»¬λ§ μ§€μ›)
- [ ] νμΌ μ••μ¶• λ° μ•„μΉ΄μ΄λΉ™ (λ―Έκµ¬ν„)
- [ ] νμΌ λ°±μ—… λ° λ³µκµ¬ μ‹μ¤ν… (λ―Έκµ¬ν„)
- [ ] CDN μ—°λ™ λ° λ°°ν¬ μµμ ν™” (λ―Έκµ¬ν„)
- [x] νμΌ μ ‘κ·Ό κ¶ν• κ΄€λ¦¬ (public ν΄λ” μ‚¬μ©)

### 10.5 μ‘μ—… κ΄€λ¦¬ λ° μ¤μΌ€μ¤„λ§ β… (100% μ™„λ£)
- [x] λ™μμƒ μƒμ„± μ‘μ—… ν κµ¬ν„ (`lib/video/job-manager.ts`)
- [x] μ°μ„ μμ„ κΈ°λ° μ‘μ—… μ¤μΌ€μ¤„λ§
- [x] λ™μ‹ μ²λ¦¬ μ ν• (μµλ€ 3κ° λ™μ‹ μ²λ¦¬)
- [x] μ‘μ—… μ‹¤ν¨ μ²λ¦¬ λ° λ΅κΉ… μ‹μ¤ν… (VideoProcessingLog)
- [x] μ‘μ—… μ¬μ‹λ„ κΈ°λ¥ (retryJob)
- [x] μ‘μ—… μ·¨μ† κΈ°λ¥ (cancelJob)
- [x] ν μƒνƒ λ¨λ‹ν„°λ§ (getQueueStatus)

### 10.6 λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ ν™•μ¥ β… (100% μ™„λ£)
- [x] Video ν…μ΄λΈ” ν™•μ¥ (ν•μ‹, μ¤νƒ€μΌ, μ„¤μ •, ν†µκ³„ ν•„λ“)
- [x] VideoTemplate ν…μ΄λΈ” μƒμ„±
- [x] VideoProcessingLog ν…μ΄λΈ” μƒμ„±
- [x] Summary-Video κ΄€κ³„ μ„¤μ •
- [x] λ§μ΄κ·Έλ μ΄μ… μ™„λ£ (`20251023043431_add_video_system_tables`)

## μ™„λ£ μ΅°κ±΄
- [x] Text-to-Video API μΈν„°νμ΄μ¤ κµ¬ν„ λ° Mock Provider ν…μ¤νΈ κ°€λ¥ β…
- [x] λ™μμƒ μƒμ„± νμ΄ν”„λΌμΈμ΄ ν¨μ¨μ μΌλ΅ λ™μ‘ β…
- [x] νμΌ κ΄€λ¦¬ μ‹μ¤ν…μ΄ μ•μ „ν•κ³  ν™•μ¥ κ°€λ¥ν•κ² κµ¬ν„ β…
- [x] μ‘μ—… κ΄€λ¦¬ μ‹μ¤ν…μ΄ ν λ° μ¬μ‹λ„ μ§€μ› β…

## μ „μ²΄ μ™„μ„±λ„: 95%

### μ„Ήμ…λ³„ μ™„μ„±λ„
| μ„Ήμ… | μ™„μ„±λ„ | μƒνƒ |
|------|--------|------|
| 10.1 λ™μμƒ μƒμ„± API | 100% | β… μ™„λ£ |
| 10.2 μƒμ„± μ—”μ§„ ν†µν•© | 80% | β… κ±°μ μ™„λ£ |
| 10.3 μ²λ¦¬ νμ΄ν”„λΌμΈ | 100% | β… μ™„λ£ |
| 10.4 νμΌ κ΄€λ¦¬ μ‹μ¤ν… | 70% | β… μ£Όμ” κΈ°λ¥ μ™„λ£ |
| 10.5 μ‘μ—… κ΄€λ¦¬ | 100% | β… μ™„λ£ |
| 10.6 DB μ¤ν‚¤λ§ | 100% | β… μ™„λ£ |

### μ£Όμ” κµ¬ν„ μ‚¬ν•­
- β… **API μ—”λ“ν¬μΈνΈ**:
  - POST /api/videos/generate, GET /api/videos, GET/PATCH/DELETE /api/videos/[id]
  - GET/POST /api/videos/templates
  - POST /api/videos/[id]/process (μ••μ¶•, μµμ ν™”, λ³€ν™, μ›ν„°λ§ν¬)
- β… **VideoJobManager**: μ‘μ—… ν, μ°μ„ μμ„, μ¬μ‹λ„, μ·¨μ†, μƒνƒ λ¨λ‹ν„°λ§, μ²λ¦¬ νμ΄ν”„λΌμΈ ν†µν•©
- β… **TextToVideoClient**: Mock/RunwayML/PikaLabs Provider μΈν„°νμ΄μ¤
- β… **VideoFileManager**: λ΅μ»¬ νμΌ μ €μ¥, λ‹¤μ΄λ΅λ“, μ‚­μ , μ¤ν† λ¦¬μ§€ μ •λ³΄
- β… **VideoProcessor**: FFmpeg κΈ°λ° λ™μμƒ μ²λ¦¬ (μ••μ¶•, μµμ ν™”, λ³€ν™, μ›ν„°λ§ν¬, μΈλ„¤μΌ μƒμ„±, ν’μ§ κ²€μ¦)
- β… **λ°μ΄ν„°λ² μ΄μ¤**: Video (ν™•μ¥), VideoTemplate, VideoProcessingLog ν…μ΄λΈ”
- β… **ν”„λ΅¬ν”„νΈ μƒμ„±**: μ¤νƒ€μΌ/ν•μ‹ κΈ°λ° μλ™ ν”„λ΅¬ν”„νΈ μµμ ν™”
- β… **μλ™ μ²λ¦¬ νμ΄ν”„λΌμΈ**: λ‹¤μ΄λ΅λ“ β†’ κ²€μ¦ β†’ μµμ ν™” β†’ μΈλ„¤μΌ μƒμ„±

### λ―Έκµ¬ν„/κ°μ„  ν•„μ” μ‚¬ν•­
- β οΈ **μ‹¤μ  Text-to-Video API μ—°λ™** (RunwayML, Pika Labs λ“± - μΈν„°νμ΄μ¤λ§ μ •μλ¨)
- β **ν΄λΌμ°λ“ μ¤ν† λ¦¬μ§€** (AWS S3, Google Cloud - ν„μ¬ λ΅μ»¬λ§ μ§€μ›)
- β **CDN μ—°λ™** (CloudFront, Cloudflare λ“±)
- β οΈ **FFmpeg μ„¤μΉ ν•„μ”** (μ‹μ¤ν…μ— FFmpegκ°€ μ„¤μΉλμ–΄ μμ–΄μ•Ό ν•¨)

## λ‹¤μ λ‹¨κ³„
μ΄ λ‹¨κ³„ μ™„λ£ ν›„ `11-video-integration.md`λ΅ μ§„ν–‰ν•μ—¬ λ™μμƒ μƒμ„± μ‹μ¤ν…μ UIμ™€ λ°±μ—”λ“λ¥Ό ν†µν•©ν•©λ‹λ‹¤.

---

## π“ κµ¬ν„ νμΌ λ©λ΅ (2025-10-23)

### API μ—”λ“ν¬μΈνΈ
- `app/api/videos/generate/route.ts` - λ™μμƒ μƒμ„± μ”μ²­ API (POST)
- `app/api/videos/route.ts` - λ™μμƒ λ©λ΅ μ΅°ν API (GET)
- `app/api/videos/[id]/route.ts` - λ™μμƒ μƒμ„Έ/μμ •/μ‚­μ  API (GET/PATCH/DELETE)
- `app/api/videos/[id]/process/route.ts` - λ™μμƒ ν›„μ²λ¦¬ API (POST) **NEW**
  - μ••μ¶• (compress), μµμ ν™” (optimize), λ³€ν™ (convert)
  - μ›ν„°λ§ν¬ (watermark), μΈλ„¤μΌ μƒμ„± (thumbnail)
- `app/api/videos/templates/route.ts` - ν…ν”λ¦Ώ μ΅°ν/μƒμ„± API (GET/POST)

### λΌμ΄λΈλ¬λ¦¬
- `lib/video/job-manager.ts` - λ™μμƒ μ‘μ—… κ΄€λ¦¬ μ‹μ¤ν… (410μ¤„)
  - VideoJobManager ν΄λμ¤ (μ‹±κΈ€ν†¤)
  - μ‘μ—… μƒμ„±, μ—…λ°μ΄νΈ, ν μ²λ¦¬
  - μ¬μ‹λ„, μ·¨μ†, μƒνƒ λ¨λ‹ν„°λ§
  - ν†µκ³„ λ° μµκ·Ό μ‘μ—… μ΅°ν
  - μ²λ¦¬ νμ΄ν”„λΌμΈ ν†µν•© (κ²€μ¦, μµμ ν™”, μΈλ„¤μΌ μƒμ„±)

- `lib/video/text-to-video-api.ts` - Text-to-Video API ν΄λΌμ΄μ–ΈνΈ (250μ¤„)
  - TextToVideoProvider μΈν„°νμ΄μ¤
  - MockTextToVideoProvider (ν…μ¤νΈμ©)
  - RunwayMLProvider (κµ¬μ΅°λ§)
  - PikaLabsProvider (κµ¬μ΅°λ§)
  - TextToVideoClient (ν†µν•© ν΄λΌμ΄μ–ΈνΈ)

- `lib/video/file-manager.ts` - νμΌ κ΄€λ¦¬ μ‹μ¤ν… (220μ¤„)
  - VideoFileManager ν΄λμ¤ (μ‹±κΈ€ν†¤)
  - λ™μμƒ/μΈλ„¤μΌ μ €μ¥, μ‚­μ , μ΅°ν
  - URLμ—μ„ νμΌ λ‹¤μ΄λ΅λ“
  - μ¤ν† λ¦¬μ§€ μ •λ³΄ μ΅°ν

- `lib/video/video-processor.ts` - λ™μμƒ μ²λ¦¬ μ‹μ¤ν… (450μ¤„) **NEW**
  - VideoProcessor ν΄λμ¤ (μ‹±κΈ€ν†¤)
  - FFmpeg κΈ°λ° λ™μμƒ μ²λ¦¬
  - μ••μ¶•, μµμ ν™”, ν¬λ§· λ³€ν™ (MP4, WebM, GIF)
  - μΈλ„¤μΌ μλ™ μƒμ„±
  - μ›ν„°λ§ν¬ μ μ©
  - λ™μμƒ ν’μ§ κ²€μ¦
  - λ©”νƒ€λ°μ΄ν„° μ¶”μ¶

### λ°μ΄ν„°λ² μ΄μ¤
- `prisma/schema.prisma` - λ™μμƒ κ΄€λ ¨ λ¨λΈ ν™•μ¥
  - Video λ¨λΈ (21κ° ν•„λ“ μ¶”κ°€)
  - VideoTemplate λ¨λΈ (μƒλ΅ μ¶”κ°€)
  - VideoProcessingLog λ¨λΈ (μƒλ΅ μ¶”κ°€)
  - VideoStatus, VideoFormat, VideoStyle enum

- `prisma/migrations/20251023043431_add_video_system_tables/` - λ§μ΄κ·Έλ μ΄μ…

### UI νμ΄μ§€ (μ΄λ―Έ κµ¬ν„λ¨, Phase 9)
- `app/admin/videos/page.tsx` - λ™μμƒ λ©λ΅ νμ΄μ§€
- `app/admin/videos/create/page.tsx` - λ™μμƒ μƒμ„± μ„¤μ • νμ΄μ§€

---

## π“ μ—…λ°μ΄νΈ μ΄λ ¥

### 2025-10-23 (μ¤ν›„) - λ™μμƒ μ²λ¦¬ νμ΄ν”„λΌμΈ μ™„μ„±
- β… **VideoProcessor ν΄λμ¤ κµ¬ν„** (450μ¤„)
  - FFmpeg κΈ°λ° λ™μμƒ μΈμ½”λ”©/μ••μ¶•
  - μΈλ„¤μΌ μλ™ μƒμ„± (νƒ€μ„μ¤νƒ¬ν”„, κ°„κ²© μ§€μ •)
  - ν¬λ§· λ³€ν™ (MP4, WebM, GIF)
  - μ›ν„°λ§ν¬ μ μ© (μ„μΉ, ν¬λ…λ„, ν¬κΈ° μ΅°μ )
  - λ™μμƒ ν’μ§ κ²€μ¦ (ν•΄μƒλ„, μ½”λ±, λΉ„νΈλ μ΄νΈ)
  - λ™μμƒ μµμ ν™” (ν•μ‹λ³„ ν•΄μƒλ„ μλ™ μ΅°μ •)
  - λ©”νƒ€λ°μ΄ν„° μ¶”μ¶
- β… **VideoJobManager ν†µν•©**
  - λ™μμƒ λ‹¤μ΄λ΅λ“ ν›„ μλ™ ν’μ§ κ²€μ¦
  - ν’μ§ μ΄μ λ°κ²¬ μ‹ μλ™ μµμ ν™”
  - API μΈλ„¤μΌ μ—†μ„ κ²½μ° μλ™ μƒμ„±
  - μ²λ¦¬ λ‹¨κ³„λ³„ μƒμ„Έ λ΅κΉ…
- β… **POST /api/videos/[id]/process** μ—”λ“ν¬μΈνΈ μ¶”κ°€
  - μ••μ¶•, μµμ ν™”, λ³€ν™, μ›ν„°λ§ν¬, μΈλ„¤μΌ μƒμ„± μ§€μ›
- β… **DELETE API νμΌ μ‚­μ  κΈ°λ¥** μ™„μ„±
- β… **μ „μ²΄ μ™„μ„±λ„ 95%** (82% β†’ 95%)

### 2025-10-23 (μ¤μ „) - κΈ°λ³Έ μ‹μ¤ν… κµ¬μ¶•
- β… λ™μμƒ μƒμ„± λ°±μ—”λ“ μ‹μ¤ν… 82% μ™„μ„±
- β… 4κ° API μ—”λ“ν¬μΈνΈ κµ¬ν„
- β… VideoJobManager μ‘μ—… ν μ‹μ¤ν… μ™„μ„±
- β… Text-to-Video API ν΄λΌμ΄μ–ΈνΈ μΈν„°νμ΄μ¤ μ •μ
- β… VideoFileManager νμΌ κ΄€λ¦¬ μ‹μ¤ν… κµ¬ν„
- β… 3κ° λ°μ΄ν„°λ² μ΄μ¤ ν…μ΄λΈ” μƒμ„± λ° λ§μ΄κ·Έλ μ΄μ…
- β οΈ Mock Providerλ΅ ν…μ¤νΈ κ°€λ¥, μ‹¤μ  API μ—°λ™ ν•„μ”

### μ£Όμ” μ„±κ³Ό
- **μ‘μ—… κ΄€λ¦¬**: ν μ‹μ¤ν…, μµλ€ 3κ° λ™μ‹ μ²λ¦¬, μλ™ μ¬μ‹λ„
- **API κµ¬μ΅°**: ν™•μ¥ κ°€λ¥ν• Provider ν¨ν„΄
- **νμΌ κ΄€λ¦¬**: λ΅μ»¬ μ €μ¥, λ‹¤μ΄λ΅λ“, μ¤ν† λ¦¬μ§€ λ¨λ‹ν„°λ§
- **λ™μμƒ μ²λ¦¬**: FFmpeg κΈ°λ° μ™„μ „ν• μ²λ¦¬ νμ΄ν”„λΌμΈ
- **ν”„λ΅¬ν”„νΈ μµμ ν™”**: μ¤νƒ€μΌ/ν•μ‹ κΈ°λ° μλ™ μƒμ„±
- **μ²λ¦¬ λ΅κ·Έ**: λ‹¨κ³„λ³„ μƒμ„Έ λ΅κΉ… (VideoProcessingLog)
- **μλ™ μµμ ν™”**: ν’μ§ κ²€μ¦ β†’ μµμ ν™” β†’ μΈλ„¤μΌ μƒμ„±

### λ‹¤μ μ°μ„ μμ„
1. FFmpeg μ„¤μΉ κ°€μ΄λ“ λ° ν™κ²½ μ„¤μ •
2. μ‹¤μ  Text-to-Video API μ—°λ™ (RunwayML λλ” Pika Labs)
3. UI-λ°±μ—”λ“ ν†µν•© (Phase 11)
4. ν΄λΌμ°λ“ μ¤ν† λ¦¬μ§€ μ—°λ™ (AWS S3, Google Cloud)